---
import BaseLayout from '../../layouts/BaseLayout.astro';
import aboutImg from '../../assets/images/products/workshop-craft2.jpg';
import '../../assets/styles/pages/about.css';

// ✅ GitHub Pages base path fix (same principle as your redirect/header/footer)
const basePath = import.meta.env.BASE_URL?.replace(/\/$/, "") || "";
const href = (path: string) => `${basePath}${path}`;

// ✅ BASE_URL-safe site URL for canonical/OG/hreflang/schema
// Change siteOrigin later if you move domain
const siteOrigin = "https://hibberds100.github.io";
const SITE_URL = `${siteOrigin}${basePath}`;

const lang = 'pt';
const canonicalPath = '/pt/about';
const canonicalUrl = `${SITE_URL}${canonicalPath}`;
const ogImageUrl = `${SITE_URL}${aboutImg.src}`;

const copy = {
  title: 'Sobre a Samsara | Carpintaria Artesanal, Feita Para Durar',
  metaDesc:
    'Conheça a Samsara Carpentry — tábuas artesanais e carpintaria por medida feita em Portugal. Descubra a nossa história, processo e o que nos torna diferentes.',
  ogLocale: 'pt_PT',

  h1: 'Sobre a Samsara',
  lede:
    'A Samsara inspira-se na transformação — dar uma nova vida à madeira através de um trabalho cuidadoso e intencional.',
  quoteTitle: 'Samsara',
  quote:
    '“Samsara é o ciclo interminável em que a alma renasce após a morte num novo corpo. Este processo continua até à libertação.”',

  storyTitle: 'A Nossa História',
  storyP1:
    'Na Samsara Carpentry, acreditamos na beleza da transformação. O nosso nome reflete o ciclo de renovação — e na oficina vemos esse mesmo percurso na madeira.',
  storyP2:
    'Cada projeto é feito com intenção: equilibrando beleza e função, respeitando o material e criando peças que encaixam naturalmente no seu espaço.',

  offerTitle: 'O Que Fazemos',
  offerIntro:
    'Criamos peças funcionais e intemporais — desde essenciais de cozinha até carpintaria por medida — desenhadas à sua medida.',
  offerItems: [
    'Tábuas de cortar e servir artesanais e blocos end-grain',
    'Carpintaria por medida para casas, estúdios e interiores',
    'Dimensões, acabamentos e aconselhamento personalizado',
  ],

  differentTitle: 'O Que Nos Torna Diferentes',
  differentIntro:
    'Mantemos o processo próximo, os padrões elevados e os materiais honestos.',
  differentItems: [
    'Feito à mão em Portugal, com atenção ao detalhe',
    'Madeiras de origem responsável e acabamentos duradouros',
    'Acompanhamento direto — a sua visão, o nosso ofício',
  ],

  processEyebrow: 'O Nosso Processo',
  processTitle: 'Cada peça começa com intenção, material e tempo.',
  steps: [
    { n: '01', title: 'Desenho', text: 'Definimos consigo o objetivo, dimensões e detalhes.' },
    { n: '02', title: 'Seleção de Materiais', text: 'Escolhemos madeiras certas para beleza e durabilidade.' },
    { n: '03', title: 'Produção Artesanal', text: 'Cortar, moldar, lixar e finalizar — tudo na nossa oficina.' },
    { n: '04', title: 'Entrega', text: 'Embalado com cuidado e entregue pronto a usar.' },
  ],

  ctaTitle: 'Pronto para começar?',
  ctaText: 'Partilhe a sua ideia — nós ajudamos a transformá-la em algo duradouro.',
  ctaPrimary: 'Contactar',
  ctaSecondary: 'Ver Produtos',

  imgAlt:
    'Mãos de um artesão a trabalhar madeira num ambiente de carpintaria artesanal',
};

const orgSchema = {
  '@context': 'https://schema.org',
  '@type': 'Organization',
  name: 'Samsara',
  url: SITE_URL,
};

const aboutSchema = {
  '@context': 'https://schema.org',
  '@type': 'AboutPage',
  name: copy.title,
  url: canonicalUrl,
  inLanguage: 'pt-PT',
  isPartOf: { '@type': 'WebSite', name: 'Samsara', url: SITE_URL },
};

const breadcrumbSchema = {
  '@context': 'https://schema.org',
  '@type': 'BreadcrumbList',
  itemListElement: [
    { '@type': 'ListItem', position: 1, name: 'Início', item: `${SITE_URL}/pt/` },
    { '@type': 'ListItem', position: 2, name: 'Sobre', item: canonicalUrl },
  ],
};
---

<BaseLayout lang="pt" currentPage="about">
  <Fragment slot="title">{copy.title}</Fragment>

  <Fragment slot="head">
    <meta name="description" content={copy.metaDesc} />
    <meta name="robots" content="index,follow" />
    <link rel="canonical" href={canonicalUrl} />

    <meta property="og:title" content={copy.title} />
    <meta property="og:description" content={copy.metaDesc} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:locale" content={copy.ogLocale} />
    <meta property="og:site_name" content="Samsara" />
    <meta property="og:image" content={ogImageUrl} />
    <meta property="og:image:width" content={String(aboutImg.width)} />
    <meta property="og:image:height" content={String(aboutImg.height)} />
    <meta property="og:image:alt" content={copy.imgAlt} />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={copy.title} />
    <meta name="twitter:description" content={copy.metaDesc} />
    <meta name="twitter:image" content={ogImageUrl} />
    <meta name="twitter:image:alt" content={copy.imgAlt} />

    <!-- ✅ hreflang BASE_URL-safe -->
    <link rel="alternate" hreflang="en" href={`${SITE_URL}/en/about`} />
    <link rel="alternate" hreflang="pt" href={`${SITE_URL}/pt/about`} />
    <link rel="alternate" hreflang="x-default" href={`${SITE_URL}/en/about`} />

    <script type="application/ld+json">{JSON.stringify(orgSchema)}</script>
    <script type="application/ld+json">{JSON.stringify(aboutSchema)}</script>
    <script type="application/ld+json">{JSON.stringify(breadcrumbSchema)}</script>
  </Fragment>

  <section class="about-shell" aria-label="Sobre">
    <div class="about-container">
      <header class="about-hero">
        <h1 class="about-title">{copy.h1}</h1>
        <p class="about-lede">{copy.lede}</p>

        <div class="about-cta-row">
          <a class="about-btn" href={href("/pt/contact")}>{copy.ctaPrimary}</a>
          <a class="about-btn secondary" href={href("/pt/shop")}>{copy.ctaSecondary}</a>
        </div>
      </header>

      <div class="about-card">
        <section class="about-story">
          <div>
            <span class="about-eyebrow">{copy.storyTitle}</span>
            <h2 class="about-h2">{copy.storyTitle}</h2>
            <p class="about-text">{copy.storyP1}</p>
            <p class="about-text">{copy.storyP2}</p>

            <div class="about-quote">
              <strong>{copy.quoteTitle}:</strong> {copy.quote}
            </div>
          </div>

          <div class="about-media">
            <img
              src={aboutImg.src}
              width={aboutImg.width}
              height={aboutImg.height}
              alt={copy.imgAlt}
              loading="lazy"
              decoding="async"
            />
          </div>
        </section>

        <div class="about-inner-divider"></div>

        <section class="about-sections">
          <div class="about-grid-2">
            <div class="about-panel">
              <h3>{copy.offerTitle}</h3>
              <p>{copy.offerIntro}</p>
              <ul class="about-list">
                {copy.offerItems.map((item) => <li>{item}</li>)}
              </ul>
            </div>

            <div class="about-panel">
              <h3>{copy.differentTitle}</h3>
              <p>{copy.differentIntro}</p>
              <ul class="about-list">
                {copy.differentItems.map((item) => <li>{item}</li>)}
              </ul>
            </div>
          </div>

          <div class="about-process">
            <span class="about-eyebrow">{copy.processEyebrow}</span>
            <h2 class="about-h2">{copy.processTitle}</h2>

            <div class="process-grid">
              {copy.steps.map((s) => (
                <article class="process-card">
                  <div class="process-num">{s.n}</div>
                  <h3 class="process-title">{s.title}</h3>
                  <p class="process-text">{s.text}</p>
                </article>
              ))}
            </div>
          </div>
        </section>

        <div class="about-cta-bar">
          <p>
            <strong>{copy.ctaTitle}</strong> {copy.ctaText}
          </p>
          <div class="about-cta-row">
            <a class="about-btn" href={href("/pt/contact")}>{copy.ctaPrimary}</a>
            <a class="about-btn secondary" href={href("/pt/shop")}>{copy.ctaSecondary}</a>
          </div>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>